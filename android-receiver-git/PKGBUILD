# Maintainer: Garrett <floft.net/contact>
pkgname=android-receiver-git
pkgver=20120119
pkgrel=1
pkgdesc="Listen for incoming messages from android-notifier and pass them to a notification application"
arch=('i686' 'x86_64')
url="https://github.com/pbrisbin/android-receiver"
license=('GPL') #not specified?
depends=()
makedepends=('git')

_gitroot="git://github.com/pbrisbin/android-receiver.git"
_gitname="android-receiver"

build() {
	cd "$srcdir"
	msg "Connecting to GIT server..."

	if [[ -d $_gitname ]]; then
		cd "$_gitname/"
		git pull origin
		msg "The local files have been updated."
		cd "$srcdir/"
	else
		git clone "$_gitroot" "$_gitname"
	fi

	msg "GIT checkout done or server timeout"
	msg "Starting make..."

	rm -rf "$_gitname-build"
	cp -r "$_gitname" "$_gitname-build"
	cd "$_gitname-build"
	
	make
}

package() {
	cd "$srcdir/$_gitname-build/"
	mkdir -p "$pkgdir/usr/bin/"
	install -Dm755 "android-receiver" "$pkgdir/usr/bin/"
}
