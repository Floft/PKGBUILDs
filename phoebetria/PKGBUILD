# Maintainer: Garrett <floft.net/contact>
pkgname=phoebetria-git
pkgver=20120823
pkgrel=1
pkgdesc="Fan controller"
arch=('x86_64')
url="http://sourceforge.net/projects/phoebetria/"
license=("GPLv3")
depends=()
makedepends=('git')
source=()
md5sums=()

_gitroot="git://git.code.sf.net/p/phoebetria/code"
_gitname="phoebetria"

build() {
	cd "$srcdir"
	msg "Connecting to GIT server..."

	if [[ -d $_gitname ]]; then
		cd "$_gitname/"
		git pull origin
		msg "The local files have been updated."
		cd "$srcdir/"
	else
		git clone "$_gitroot" "$_gitname"
	fi

	msg "GIT checkout done or server timeout"
	msg "Starting make..."

	rm -rf "$_gitname-build"
	cp -r "$_gitname" "$_gitname-build"
	cd "$_gitname-build"

	make
}

package() {
	cd "$srcdir/$_gitname-build/"

	mkdir -p "$pkgdir/etc/udev/rules.d/"

	install -Dm644 "$srcdir/bitfenix-recon-fancontrol.rules" "$pkgdir/etc/udev/rules.d/"

	return 1
}
